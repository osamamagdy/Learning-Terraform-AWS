# Run the aws configure command to set your access and secret keys (aws-cli must be installed)
aws configure

# Initialize the terraform configuration
terraform init
#you may need to change the terraform required version in the "./.terraform/modules/vpc/versions.tf" (this file will appear after you type terraform init but it will halt without this modification) to match the version you're using

# Plan the terraform deployment
terraform plan -out vpc.tfplan

# Apply the deployment
terraform apply "vpc.tfplan"

# Do not destroy the VPC until you have completed state migration module

###################################################################################################

# State migration module

# Rename the backend config file
ren backend.tf.rename backend.tf

# Update the region, bucket, and dynamodb table
terraform init -backend-config="bucket=BUCKET_NAME" -backend-config="region=REGION_NAME" -backend-config="dynamodb_table=TABLE_NAME"